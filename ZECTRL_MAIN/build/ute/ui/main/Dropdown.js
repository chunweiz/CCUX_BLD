sap.ui.define(["jquery.sap.global","sap/ui/core/Control","sap/ui/core/Popup","ute/ui/main/Checkbox","ute/ui/main/DropdownItem"],function(a,b,c){"use strict";var d=b.extend("ute.ui.main.Dropdown",{metadata:{library:"ute.ui.main",properties:{design:{type:"ute.ui.main.DropdownDesign",defaultValue:ute.ui.main.DropdownDesign.Default},enabled:{type:"boolean",defaultValue:!0},selectedKey:{type:"string",defaultValue:null},placeholder:{type:"string",defaultValue:null}},aggregations:{content:{type:"ute.ui.main.DropdownItem",multiple:!0,singularName:"content"},_headerContent:{type:"ute.ui.main.DropdownItem",multiple:!1,visibility:"hidden"}},defaultAggregation:"content",events:{select:{parameters:{selectedKey:{type:"string"}}}}}});return d.prototype.onclick=function(b){b.stopPropagation(),this.$().hasClass("uteMDd-active")?(this.$().removeClass("uteMDd-active"),a(document).off("click",this._autoClose)):this.getEnabled()&&this._hasContent()&&(this.$().addClass("uteMDd-active"),this.$("picker").css("z-index",c.getNextZIndex()),a(document).on("click",a.proxy(this._autoClose,this)))},d.prototype._autoClose=function(){a(document).off("click",this._autoClose),this.$().removeClass("uteMDd-active")},d.prototype.setEnabled=function(a){return a=!!a,a?this.data("disabled",null):this.data("disabled","disabled",!0),this.setProperty("enabled",a),this},d.prototype.setSelectedKey=function(a){var b=this.getContent()||[];return b.forEach(function(b){b.getKey()===a?b.data("selected","selected",!0):b.data("selected",null)}),this.setProperty("selectedKey",a),this._syncHeaderContent(),this},d.prototype.addContent=function(a){return a.attachPress(this._onDropdownItemPress,this),this.addAggregation("content",a),this},d.prototype.insertContent=function(a,b){return a.attachPress(this._onDropdownItemPress,this),this.insertAggregation("content",a,b),this},d.prototype._onDropdownItemPress=function(a){this.getSelectedKey()!==a.getSource().getKey()&&(this.setSelectedKey(a.getSource().getKey()),this.fireSelect({selectedKey:this.getSelectedKey()}))},d.prototype._hasContent=function(){var a=this.getContent()||[];return a.length>0},d.prototype._syncHeaderContent=function(){var a=this.getContent()||[];this.removeAggregation("_headerContent"),a.forEach(function(a){a.getKey()===this.getSelectedKey()&&this.setAggregation("_headerContent",a.clone())}.bind(this))},d},!0);