sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","nrg/module/billing/view/ABPPopup"],function(a,b,c,d,e,f){"use strict";var g=a.extend("nrg.module.billing.view.BillingCheckbookTools");return g.prototype.onInit=function(){},g.prototype.onBeforeRendering=function(){this.getView().setModel(this.getOwnerComponent().getModel("comp-eligibility"),"oDataEligSvc"),this.getView().setModel(new sap.ui.model.json.JSONModel,"oEligibility");var a=this.getOwnerComponent().getCcuxContextManager().getContext().oData;this._bpNum=a.bpNum,this._caNum=a.caNum,this._coNum=a.coNum},g.prototype.onAfterRendering=function(){},g.prototype._retrieveEligibility=function(a){var b,c="/EligCheckS('"+this._coNum+"')",d=this.getView().getModel("oDataEligSvc"),e=this.getView().getModel("oEligibility");b={success:function(b){e.setData(b),a&&a()}.bind(this),error:function(){}.bind(this)},d&&d.read(c,b)},g.prototype._onDunningBtnClicked=function(){var a=this.getOwnerComponent().getCcuxWebUiManager();a.notifyWebUi("openIndex",{LINK_ID:"Z_DUNH"})},g.prototype._onFeeAdjBtnClicked=function(){this.getOwnerComponent().getRouter().navTo("billing.feeAdjs",{bpNum:this._bpNum,caNum:this._caNum,coNum:this._coNum})},g.prototype._onAvgBillBtnClicked=function(){this.ABPPopupCustomControl||(this.ABPPopupCustomControl=new f({isRetro:!1}),this.ABPPopupCustomControl.attachEvent("ABPCompleted",function(){},this),this.getView().addDependent(this.ABPPopupCustomControl)),this.ABPPopupCustomControl.prepareABP()},g.prototype._onDppBtnClicked=function(){var a,b=this.getOwnerComponent().getCcuxWebUiManager(),c=this.getOwnerComponent().getRouter(),d=!1;this.getOwnerComponent().getCcuxApp().setOccupied(!0),this._retrieveEligibility(function(){d=!0}),a=setInterval(function(){if(d){var e=this.getView().getModel("oEligibility");this.getOwnerComponent().getCcuxApp().setOccupied(!1),clearInterval(a),e.oData.DPPActv?b.notifyWebUi("openIndex",{LINK_ID:"Z_DPP"}):c.navTo("billing.DefferedPmtPlan",{bpNum:this._bpNum,caNum:this._caNum,coNum:this._coNum})}}.bind(this),100)},g.prototype._onExtnBtnClicked=function(){var a=(this.getOwnerComponent().getCcuxWebUiManager(),this.getOwnerComponent().getRouter());a.navTo("billing.DefferedPmtExt",{bpNum:this._bpNum,caNum:this._caNum,coNum:this._coNum})},g});