sap.ui.define(["nrg/base/view/BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator","jquery.sap.global","sap/ui/model/json/JSONModel","sap/ui/core/format/DateFormat"],function(a,b,c,d,e,f){"use strict";var g=a.extend("nrg.module.quickpay.view.MainQuick");return g.prototype.onInit=function(){},g.prototype.onBeforeRendering=function(){var a,b,c,g=(this.getView().getModel("comp-quickpay"),this.getView().byId("idnrgQPPay-msgArea")),h=new e({reliantPay:!0,message:"",reliantText:"Verify",reliantPress:".onAcceptReliant",newBankRouting:"",newBankAccount:"",selected:0}),i=this;this._oFormatYyyymmdd=f.getInstance({pattern:"MM/dd/yyyy"}),this._OwnerComponent=this.getView().getParent().getParent().getController().getOwnerComponent(),this._OwnerComponent.getCcuxApp().setOccupied(!0),b=new sap.ui.model.json.JSONModel,this.getView().setModel(b,"quickpay-cl"),this.getView().setModel(h,"appView"),a="/PayAvailFlagsSet",a=a+"(BP='"+this._sBP+"',CA='"+this._sCA+"')",c=function(){d.sap.log.info("Date Received Succesfully"),i._OwnerComponent.getCcuxApp().setOccupied(!1)},this.getView().bindElement({model:"comp-quickpay",path:a,events:{dataReceived:c}}),g.addStyleClass("nrgQPPay-hide")},g.prototype.onCreditCard=function(){var a,b,c,e,f=this.getView().byId("idnrgQPPay-TBIStopRec"),g=this.getView().byId("idnrgQPCC-DDL"),h=this.getView().byId("idnrgQPCC-DDLItem"),i=this.getView().getModel("comp-quickpay"),j=this.getView().byId("idnrgQPCC-WaiveReasonItem"),k=this.getView().byId("idnrgQPCC-WR"),l=this.getView().byId("idnrgQPCC-Date"),m=this,n=new sap.ui.model.json.JSONModel,o=this.getView().byId("idnrgQPPay-msgArea"),p=this.getView().getModel("appView");f.setSelected(!0),l.setDefaultDate(this._oFormatYyyymmdd.format(new Date,!0)),this._OwnerComponent.getCcuxApp().setOccupied(!0),this.getView().setModel(n,"quickpay-cc"),e=function(a){d.sap.log.info("Date Received Succesfully"),a&&(1===a.getSource().getLength()?k.setSelectedKey(a.getSource().getContexts()[0].getProperty("ReasonCode")):a&&a.mParameters&&a.mParameters.data&&a.mParameters.data.results&&a.mParameters.data.results.forEach(function(a){a&&a.DefaultFlag&&k.setSelectedKey(a.ReasonCode),a&&a.Message&&(o.removeStyleClass("nrgQPPay-hide"),o.addStyleClass("nrgQPPay-black"),p.setProperty("/message",a.Message))}))},a=function(){d.sap.log.info("Date Received Succesfully"),m._OwnerComponent.getCcuxApp().setOccupied(!1)},c="/CreditCardSet(BP='"+this._sBP+"',CA='"+this._sCA+"')",b={success:function(a){n.setData(a)}.bind(this),error:function(){d.sap.log.info("Error occured")}.bind(this)},i&&i.read(c,b),c="/CreditCardSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/CardsSet",b={model:"comp-quickpay",path:c,template:h,parameters:{countMode:"None",operationMode:"Server"},events:{dataReceived:a}},g.bindAggregation("content",b),c="/CreditCardSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/WaiveReasonsSet",b={model:"comp-quickpay",path:c,template:j,parameters:{countMode:"None"},events:{dataReceived:e}},k.bindAggregation("content",b)},g.prototype.onAcceptCredit=function(){var a,b,c,d,e,f,g=this.getView().getModel("comp-quickpay"),h=this.getView().byId("idnrgQPPay-msgArea"),i=this.getView().byId("idnrgQPCC-Date"),j=this.getView().byId("idnrgQPCC-DDL"),k=this.getView().byId("idnrgQPCC-Amt"),l=this.getView().byId("idnrgQPCC-WR"),m=this,n=this.getView().getModel("quickpay-cl"),o=this.getView().getModel("quickpay-cc"),p=this.getView().byId("idnrgQPCC-zipcode"),q=this.getView().byId("idnrgQPCC-cvv");return h.removeStyleClass("nrgQPPay-hide"),h.addStyleClass("nrgQPPay-black"),this._ValidateValue(k.getValue(),"Enter Amount to be posted")&&this._ValidateValue(j.getSelectedKey(),"Select Credit Card")&&this._ValidateValue(p.getValue(),"Enter Zip Code")&&this._ValidateValue(q.getValue(),"Enter CVV")?(this._OwnerComponent.getCcuxApp().setOccupied(!0),b="/CreditCardPost",c=new Date(i.getValue()),d=o.getProperty("/InvoiceDate"),f=function(a){switch(a){case ute.ui.main.Popup.Action.Yes:e();break;case ute.ui.main.Popup.Action.No:m._OwnerComponent.getCcuxApp().setOccupied(!1);break;case ute.ui.main.Popup.Action.Ok:}},e=function(){a={method:"POST",urlParameters:{ContractID:"",BP:m._sBP,CA:m._sCA,CardNumber:j.getSelectedKey(),PaymentDate:c,Amount:k.getValue(),WaiveFlag:l.getSelectedKey(),Cvval:q.getValue(),ZipCode:p.getValue(),Activit:"0",CardType:"0",Class:"0",Error:"0",InvoiceAmount:"0",InvoiceDate:1436109229e3,Message:"0",NameOnCard:"0",PopMessage:"0",UserDecision:!0,WaiveReason:"0"},success:function(a){""===a.Error?(n.setData(a),m.onPaymentSuccess(),h.addStyleClass("nrgQPPay-hide")):m.getView().getModel("appView").setProperty("/message",a.Message),m._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this),error:function(a){m.getView().getModel("appView").setProperty("/message",a.statusText),m._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this)},g.callFunction(b,a)},void(c.getTime()>d.getTime()?ute.ui.main.Popup.Confirm({title:"Information",message:"Your Scheduled payment date is after the due date. You will be subject to applicable late fees and/or disconnection.",callback:f}):e())):!1},g.prototype.onPendingCreditCard=function(){var a,b,c,f,g=this.getView().byId("idnrgQPPay-TBIPCC"),h=this.getView().byId("idnrgQPPay-Popup"),i=this.getView().byId("idnrgQPPayBt-close"),j=this.getView().byId("idnrgQPTable-Row"),k=(this.getView().byId("idnrgQPTable-Rows"),"/CreditCardPPSet"),l=this.getView().getModel("comp-quickpay"),m=new e,n=this;this._OwnerComponent.getCcuxApp().setOccupied(!0),g.setSelected(!0),this._aPendingSelPaths=[],this.setPosition(0),h.removeStyleClass("nrgQPPay-Popup"),h.addStyleClass("nrgQPPay-PopupPayment"),i.addStyleClass("nrgQPPayBt-closeBG"),this.getView().setModel(m,"QP-quickpay"),b=["BP","CA"],c=[this._sBP,this._sCA],f=this._createSearchFilterObject(b,c),a={filters:f,success:function(a){m.setData(a),j.setModel(m),d.sap.log.info("Odata Read Successfully:::"),n._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this),error:function(){d.sap.log.info("Error occured"),n._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this)},l&&l.read(k,a)},g.prototype.onPendingCCSave=function(){var a,b=this.getView().getModel("comp-quickpay"),c=this.getView().getModel("QP-quickpay"),e=this;e._OwnerComponent.getCcuxApp().setOccupied(!0),this._aPendingSelPaths.map(function(f){var g=c.getContext(f),h="/CreditCardPPSet";h="/CreditCardPPSet(BP='"+this._sBP+"',CA='"+this._sCA+"')",a={success:function(){var a,c,f=["BP","CA"],g=[this._sBP,this._sCA],i=e.getView().getModel("QP-quickpay"),j=e.getView().byId("idnrgQPTable-Row");a=e._createSearchFilterObject(f,g),c={filters:a,success:function(a){e._OwnerComponent.getCcuxApp().setOccupied(!1),ute.ui.main.Popup.Alert({title:"Information",message:"Update Successfull"}),i.setData(a),j.setModel(i),d.sap.log.info("Odata Read Successfully:::")}.bind(this),error:function(){d.sap.log.info("Error occured"),e._OwnerComponent.getCcuxApp().setOccupied(!1),ute.ui.main.Popup.Alert({title:"Information",message:"Update failed"})}.bind(this)},b&&b.read(h,c),e._OwnerComponent.getCcuxApp().setOccupied(!1),d.sap.log.info("Odata Read Successfully:::")}.bind(this),error:function(){e._OwnerComponent.getCcuxApp().setOccupied(!1),d.sap.log.info("Eligibility Error occured")}.bind(this)},b.update(h,{CardID:g.getProperty("CardID"),CardNumber:g.getProperty("CardNumber"),ScheduledDate:g.getProperty("ScheduledDate"),Amount:g.getProperty("Amount"),ContractID:"",BP:g.getProperty("BP"),CA:g.getProperty("CA"),CurrentStatus:g.getProperty("CurrentStatus")},a)})},g.prototype.onPendingCCSelected=function(a){var b,c,d,e,f=a.getSource().getParent(),g=this.getView().getModel("appView").getProperty("/selected");e=a.getSource().getBindingContext("QP-quickpay").getModel(),b=a.getSource().getParent().getBindingContext("QP-quickpay").getPath(),a.getSource().getChecked()?g&&1===g?(ute.ui.main.Popup.Alert({title:"Information",message:"Only one Record editable"}),a.getSource().setChecked(!1)):(c=this._aPendingSelPaths.indexOf(b),d=0>c&&this._aPendingSelPaths.push(b),g=1,this.getView().getModel("appView").setProperty("/selected",g),e.setProperty(a.getSource().getBindingContext("QP-quickpay").getPath()+"/Editable",!0),f.addStyleClass("nrgQPTable-RowsSelected")):(c=this._aPendingSelPaths.indexOf(b),d=c>-1&&this._aPendingSelPaths.splice(c,1),g=0,this.getView().getModel("appView").setProperty("/selected",g),f.removeStyleClass("nrgQPTable-RowsSelected"))},g.prototype.onAddCC=function(){var a,b,c,e=this.getView().getModel("comp-quickpay"),f=this;c=function(){d.sap.log.info("Date Received Succesfully")},b="/CCCreateURLSet(BP='"+this._sBP+"',CA='"+this._sCA+"')",a={success:function(a){var b=window.open(a.URL);b.onbeforeunload=function(){f.onRefreshCC()},d.sap.log.info("Odata Read Successfully:::")}.bind(this),error:function(){d.sap.log.info("Error occured")}.bind(this)},e&&e.read(b,a)},g.prototype.onDeclineCredit=function(){this.getView().getParent().close()},g.prototype.onRefreshCC=function(){var a,b,c,e=this.getView().byId("idnrgQPCC-DDL"),f=this.getView().byId("idnrgQPCC-DDLItem"),g=this;g._OwnerComponent.getCcuxApp().setOccupied(!0),a=function(){d.sap.log.info("Date Received Succesfully"),g._OwnerComponent.getCcuxApp().setOccupied(!1)},c="/CreditCardSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/CardsSet",b={model:"comp-quickpay",path:c,template:f,parameters:{countMode:"None",operationMode:"Server"},events:{dataReceived:a}},e.bindAggregation("content",b)},g.prototype.onBankDraft=function(){var a,b,c,e,f=this.getView().byId("idnrgQPPay-TBIBD"),g=this.getView().byId("idnrgQPPay-Popup"),h=this.getView().byId("idnrgQPPayBt-close"),i=this.getView().byId("idnrgQPBD-Date"),j=this,k=this.getView().byId("idnrgQPCC-WaiveReasonItem"),l=this.getView().byId("idnrgQPCC-BankDraftItem"),m=this.getView().byId("idnrgQPBD-BankAccounts"),n=this.getView().byId("idnrgQPBD-WaiveReason"),o=new sap.ui.model.Sorter("LastUsed",!0),p=new sap.ui.model.json.JSONModel,q=this.getView().getModel("comp-quickpay"),r=this.getView().byId("idnrgQPPay-msgArea"),s=this.getView().getModel("appView");i.setDefaultDate(this._oFormatYyyymmdd.format(new Date,!0)),g.removeStyleClass("nrgQPPay-Popup"),g.addStyleClass("nrgQPPay-PopupWhite"),h.addStyleClass("nrgQPPayBt-closeBG"),f.setSelected(!0),this.getView().setModel(p,"quickpay-bd"),this._OwnerComponent.getCcuxApp().setOccupied(!0),a="/BankDraftSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/WaiveReasonsSet",b=function(){d.sap.log.info("Date Received Succesfully"),j._OwnerComponent.getCcuxApp().setOccupied(!1)},e=function(a){d.sap.log.info("Date Received Succesfully"),a&&(1===a.getSource().getLength()?n.setSelectedKey(a.getSource().getContexts()[0].getProperty("ReasonCode")):a&&a.mParameters&&a.mParameters.data&&a.mParameters.data.results&&a.mParameters.data.results.forEach(function(a){a&&a.DefaultFlag&&n.setSelectedKey(a.ReasonCode),a&&a.Message&&(r.removeStyleClass("nrgQPPay-hide"),r.addStyleClass("nrgQPPay-black"),s.setProperty("/message",a.Message))}))},a="/BankDraftSet(BP='"+this._sBP+"',CA='"+this._sCA+"')",c={success:function(a){p.setData(a)}.bind(this),error:function(){d.sap.log.info("Error occured")}.bind(this)},q&&q.read(a,c),a="/BankDraftSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/WaiveReasonsSet",c={model:"comp-quickpay",path:a,template:k,parameters:{countMode:"None"},events:{dataReceived:e}},n.bindAggregation("content",c),a="/BankDraftSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/BankAccountSet",c={model:"comp-quickpay",path:a,template:l,parameters:{countMode:"None"},sorter:o,events:{dataReceived:b}},m.bindAggregation("content",c)},g.prototype.onAcceptBankDraft=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this.getView().getModel("comp-quickpay"),o=this.getView().byId("idnrgQPPay-msgArea"),p=this.getView().byId("idnrgQPBD-Date"),q=this.getView().byId("idnrgQPBD-BankAccounts"),r=this.getView().byId("idnrgQPBD-Amt"),s=this.getView().byId("idnrgQPBD-WaiveReason"),t=this,u=this.getView().getModel("quickpay-cl"),v=this.getView().getModel("quickpay-bd");return o.removeStyleClass("nrgQPPay-hide"),o.addStyleClass("nrgQPPay-black"),this._ValidateValue(r.getValue(),"Enter Amount to be posted")&&this._ValidateValue(q.getSelectedKey(),"Select Bank Account")?(b="/BankDraftpost",d=q.getSelectedKey(),f=n.getProperty("/BankAccountSet(BP='"+this._sBP+"',CA='"+this._sCA+"',BankKey='"+d+"')/BankAccNum"),e=n.getProperty("/BankAccountSet(BP='"+this._sBP+"',CA='"+this._sCA+"',BankKey='"+d+"')/BankRouting"),this._OwnerComponent.getCcuxApp().setOccupied(!0),c=new Date(p.getValue()),i=parseInt(v.getProperty("/InvoiceAmount"),10)||0,j=v.getProperty("/InvoiceDate"),h=function(a){switch(a){case ute.ui.main.Popup.Action.Yes:g();break;case ute.ui.main.Popup.Action.No:t._OwnerComponent.getCcuxApp().setOccupied(!1);break;case ute.ui.main.Popup.Action.Ok:}},k=function(a){switch(a){case ute.ui.main.Popup.Action.Yes:l();break;case ute.ui.main.Popup.Action.No:t._OwnerComponent.getCcuxApp().setOccupied(!1);break;case ute.ui.main.Popup.Action.Ok:}},l=function(){r>0&&j.getTime()<c.getTime()?ute.ui.main.Popup.Confirm({title:"Information",message:"Your scheduled payment date is after the due date.  You will be subject to applicable late fees and/or disconnection.",callback:h}):g()},g=function(){a={method:"POST",urlParameters:{ContractID:"",BP:t._sBP,CA:t._sCA,BankAccNum:f,PaymentDate:c,Amount:r.getValue(),WaiveFlag:s.getSelectedKey(),BankKey:d,BankRouting:e,Activit:"0",Class:"0",Error:"0",InvoiceAmount:"0",InvoiceDate:1436109229e3,Message:"0",PopMessage:"0",UserDecision:!0,WaiveReason:"0"},success:function(a){""===a.Error?(u.setData(a),t.onPaymentSuccess(),o.addStyleClass("nrgQPPay-hide")):t.getView().getModel("appView").setProperty("/message",a.Message),t._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this),error:function(a){t.getView().getModel("appView").setProperty("/message",a.statusText),t._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this)},n.callFunction(b,a)},m=parseInt(r.getValue(),10)||0,void(m>i?ute.ui.main.Popup.Confirm({title:"Information",message:"Payment amount is greater than Total amount due. Do you wish to continue?",callback:k}):l())):!1},g.prototype.onPendingBankDraft=function(){var a,b,c,f,g=this.getView().byId("idnrgQPPay-TBIPBD"),h=this.getView().byId("idnrgQPPay-Popup"),i=this.getView().byId("idnrgQPPayBt-close"),j=this.getView().byId("idnrgQPTable-BDRow"),k=(this.getView().byId("idnrgQPTable-BDRows"),"/BankDraftPPSet"),l=this.getView().getModel("comp-quickpay"),m=new e,n=this;n._OwnerComponent.getCcuxApp().setOccupied(!0),g.setSelected(!0),this._aPendingSelPaths=[],h.removeStyleClass("nrgQPPay-Popup"),h.addStyleClass("nrgQPPay-PopupPayment"),i.addStyleClass("nrgQPPayBt-closeBG"),this.getView().setModel(m,"QP-quickpay"),b=["BP","CA"],c=[this._sBP,this._sCA],f=this._createSearchFilterObject(b,c),a={filters:f,success:function(a){m.setData(a),j.setModel(m),d.sap.log.info("Odata Read Successfully:::"),n._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this),error:function(){d.sap.log.info("Eligibility Error occured"),n._OwnerComponent.getCcuxApp().setOccupied(!1)}.bind(this)},l&&l.read(k,a)},g.prototype.onPendingBDSelected=function(a){var b,c,d,e,f=a.getSource().getParent(),g=this.getView().getModel("appView").getProperty("/selected");e=a.getSource().getBindingContext("QP-quickpay").getModel(),b=a.getSource().getParent().getBindingContext("QP-quickpay").getPath(),a.getSource().getChecked()?g&&1===g?(ute.ui.main.Popup.Alert({title:"Information",message:"Only one Record editable"}),a.getSource().setChecked(!1)):(c=this._aPendingSelPaths.indexOf(b),d=0>c&&this._aPendingSelPaths.push(b),g=1,this.getView().getModel("appView").setProperty("/selected",g),e.setProperty(a.getSource().getBindingContext("QP-quickpay").getPath()+"/Editable",!0),f.addStyleClass("nrgQPTable-RowsSelected")):(c=this._aPendingSelPaths.indexOf(b),d=c>-1&&this._aPendingSelPaths.splice(c,1),g=0,this.getView().getModel("appView").setProperty("/selected",g),f.removeStyleClass("nrgQPTable-RowsSelected"))},g.prototype.onPendingBDSave=function(){var a,b=this.getView().getModel("comp-quickpay"),c=this.getView().getModel("QP-quickpay"),e=this;e._OwnerComponent.getCcuxApp().setOccupied(!0),this._aPendingSelPaths.map(function(f){var g,h,i=c.getContext(f),j=["BP","CA"],k=[i.getProperty("BP"),i.getProperty("CA")],l=e.getView().byId("idnrgQPTable-BDRow"),m="/BankDraftPPSet";e.getView().getModel("appView").setProperty("/selected",0),a={method:"POST",urlParameters:{RoutingNumber:i.getProperty("RoutingNumber"),AccountNumber:i.getProperty("AccountNumber"),ScheduledDate:i.getProperty("ScheduledDate"),PaymentAmount:i.getProperty("PaymentAmount"),TrackingID:i.getProperty("TrackingID"),ContractID:"",BP:i.getProperty("BP"),CA:i.getProperty("CA"),CurrentStatus:i.getProperty("CurrentStatus")},success:function(){d.sap.log.info("Odata Read Successfully:::"),g=e._createSearchFilterObject(j,k),h={filters:g,success:function(a){c.setData(a),l.setModel(c),d.sap.log.info("Odata Read Successfully:::"),e._OwnerComponent.getCcuxApp().setOccupied(!1),ute.ui.main.Popup.Alert({title:"Information",message:"Update Successfull"})}.bind(this),error:function(){d.sap.log.info("Error occured"),e._OwnerComponent.getCcuxApp().setOccupied(!1),ute.ui.main.Popup.Alert({title:"Information",message:"Update Successfull"})}.bind(this)},b&&b.read(m,h)}.bind(this),error:function(){d.sap.log.info("Error occured"),e._OwnerComponent.getCcuxApp().setOccupied(!1),ute.ui.main.Popup.Alert({title:"Information",message:"Update failed"})}.bind(this)},b.callFunction("/BankDraftUpdate",a)})},g.prototype.onAddBD=function(){var a=this.getView().byId("idnrgQPPay-TBIAddBD");a.setSelected(!0)},g.prototype.onAddNewBD=function(){var a=this.getView().getModel("comp-quickpay"),b=this.getView().getModel("appView"),c="/BankAccountSet",d=this,e=b.getProperty("/newBankAccount"),f=b.getProperty("/newBankRouting"),g=this.getView().byId("idnrgQPPay-msgArea");return g.removeStyleClass("nrgQPPay-hide"),g.addStyleClass("nrgQPPay-black"),this._ValidateValue(e,"Enter Bank Account")&&this._ValidateValue(f,"Enter Routing Number")?(this._OwnerComponent.getCcuxApp().setOccupied(!0),void a.create(c,{ContractID:"",BP:this._sBP,CA:this._sCA,BankAccNum:e,BankRouting:f},{success:function(a){a.Error&&"X"===a.Error?d.getView().getModel("appView").setProperty("/message",a.Message):d.onBankDraft(),d._OwnerComponent.getCcuxApp().setOccupied(!1)},error:function(){d._OwnerComponent.getCcuxApp().setOccupied(!1)}})):!1},g.prototype.onReliantCard=function(){var a=this.getView().byId("idnrgQPPay-TBIRD"),b=this.getView().byId("idnrgQPPay-Popup"),c=this.getView().byId("idnrgQPPayBt-close"),d=this.getView().byId("idnrgQPCC-RedDate"),e=this.getView().byId("idnrgQPCC-reliantRedeem");b.removeStyleClass("nrgQPPay-Popup"),b.addStyleClass("nrgQPPay-PopupWhite"),c.addStyleClass("nrgQPPayBt-closeBG"),e.addStyleClass("nrgQPPay-hide"),a.setSelected(!0),d.setValue(this._oFormatYyyymmdd.format(new Date,!0)),d.setEditable(!1)},g.prototype.onAcceptReliant=function(){var a,b,c=(this.getView().getModel("comp-quickpay"),this.getView().byId("idnrgQPPay-msgArea")),e=this.getView().byId("idnrgQPCC-reliantAccept"),f=this.getView().byId("idnrgQPCC-reliantRedeem"),g=this.getView().byId("idnrgQPCC-ReliantCard"),h=this;return a="/ReliantSet",c.removeStyleClass("nrgQPPay-hide"),c.addStyleClass("nrgQPPay-black"),this._ValidateValue(g.getValue(),"Enter Reliant Card")?(this._OwnerComponent.getCcuxApp().setOccupied(!0),a=a+"(BP='"+this._sBP+"',CA='"+this._sCA+"',ReliantCard='"+g.getValue()+"')",b=function(a){""!==a.mParameters.data.Error?h.getView().getModel("appView").setProperty("/message",a.mParameters.data.Message):(h.getView().getModel("appView").setProperty("/message","Success"),e.addStyleClass("nrgQPPay-hide"),f.removeStyleClass("nrgQPPay-hide")),d.sap.log.info("Odata Read Successfully:::"),h._OwnerComponent.getCcuxApp().setOccupied(!1)},void this.getView().byId("idnrgQPCC-Amt2").bindElement({model:"comp-quickpay",path:a,events:{dataReceived:b}})):!1},g.prototype.onDeclineReliant=function(){this.getView().getParent().close()},g.prototype.onReliantCardChange=function(){this.getView().getModel("appView").setProperty("/reliantPay",!0)},g.prototype.onReliantRedeem=function(){var a,b,c=this.getView().getModel("comp-quickpay"),e=this.getView().byId("idnrgQPPay-msgArea"),f=this.getView().byId("idnrgQPCC-Amt2"),g=this.getView().byId("idnrgQPPay-TBIPaySucc"),h=this,i=this.getView().byId("idnrgQPPay-Popup"),j=this.getView().byId("idnrgQPPayBt-close");this._OwnerComponent.getCcuxApp().setOccupied(!0),b=f.getBindingContext("comp-quickpay"),a="/ReliantSet",c.create(a,{ContractID:"",BP:b.getProperty("BP"),CA:b.getProperty("CA"),ReliantCard:b.getProperty("ReliantCard"),Amount:b.getProperty("Amount")},{success:function(){i.removeStyleClass("nrgQPPay-PopupWhite"),i.addStyleClass("nrgQPPay-Popup"),j.addStyleClass("nrgQPPayBt-closeBG"),g.setSelected(!0),e.addStyleClass("nrgQPPay-hide"),d.sap.log.info("Create successfull"),h._OwnerComponent.getCcuxApp().setOccupied(!1)},error:function(){h.getView().getModel("appView").setProperty("/message","Error at backend"),d.sap.log.info("Create Failure"),h._OwnerComponent.getCcuxApp().setOccupied(!1)}})},g.prototype.onReceipt=function(){var a,b=this.getView().byId("idnrgQPPay-TBIRC"),c=this.getView().byId("idnrgQPPay-Popup"),d=this.getView().byId("idnrgQPPayBt-close"),e=(this.getView().byId("idnrgQPCC-ReceiptDD"),this.getView().byId("idnrgQPCC-WaiveReasonItem"),this.getView().getModel("comp-quickpay"),this.getView().byId("idnrgQPRC-RcDate"));e.setValue(this._oFormatYyyymmdd.format(new Date,!0)),c.removeStyleClass("nrgQPPay-Popup"),c.addStyleClass("nrgQPPay-PopupWhite"),d.addStyleClass("nrgQPPayBt-closeBG"),b.setSelected(!0),a="/ReceiptSet(BP='"+this._sBP+"',CA='"+this._sCA+"')/WaiveReasonsSet"},g.prototype.onAcceptReceipt=function(){var a,b=this.getView().getModel("comp-quickpay"),c=this.getView().byId("idnrgQPPay-msgArea"),d=(this.getView().byId("idnrgQPRC-RcDate"),this.getView().byId("idnrgQPRC-RNum")),e=this.getView().byId("idnrgQPRC-Amt"),f=this,g=this.getView().getModel("quickpay-cl");return c.removeStyleClass("nrgQPPay-hide"),c.addStyleClass("nrgQPPay-black"),this._ValidateValue(d.getValue(),"Enter Receipt Number")&&this._ValidateValue(e.getValue(),"Enter Amount")?(this._OwnerComponent.getCcuxApp().setOccupied(!0),a="/ReceiptSet",void b.create(a,{ContractID:"",BP:this._sBP,CA:this._sCA,ReceiptNumber:d.getValue(),Amount:e.getValue()},{success:function(a){""===a.Error?(g.setData(a),f.onPaymentSuccess(),c.addStyleClass("nrgQPPay-hide")):f.getView().getModel("appView").setProperty("/message",a.Message),f._OwnerComponent.getCcuxApp().setOccupied(!1)},error:function(a){f.getView().getModel("appView").setProperty("/message",a.statusText),f._OwnerComponent.getCcuxApp().setOccupied(!1)}})):!1},g.prototype.formatAccountNumber=function(a){return void 0!==a&&null!==a&&""!==a&&a.split("-").length>1?a.split("-")[1]:""},g.prototype.formatCardNumber=function(a){return void 0!==a&&null!==a&&""!==a&&a.split("-").length>1?a.split("-")[2]:""},g.prototype._ValidateValue=function(a,b){return void 0===a||null===a||""===a?(this.getView().getModel("appView").setProperty("/message",b),!1):!0},g.prototype.formatCCType=function(a){return void 0===a||null===a||""===a?"":"ZVIS"===a?"sap-icon://ute-icon/cc-visa":"ZDSC"===a?"sap-icon://ute-icon/cc-discover":"ZMCD"===a?"sap-icon://ute-icon/cc-mastercard":"ZATM"===a?"sap-icon://ute-icon/cc-visa":void 0},g.prototype.onStopRec=function(){var a=this.getView().byId("idnrgQPPay-TBICC"),b=this.getView().byId("idnrgQPPay-Popup"),c=this.getView().byId("idnrgQPPayBt-close");b.removeStyleClass("nrgQPPay-Popup"),b.addStyleClass("nrgQPPay-PopupWhite"),c.addStyleClass("nrgQPPayBt-closeBG"),a.setSelected(!0)},g.prototype.onPopupClose=function(){this.getView().getParent().close()},g.prototype.onPaymentSuccess=function(){var a=this.getView().byId("idnrgQPPay-TBIPaySucc"),b=this.getView().byId("idnrgQPPay-Popup"),c=this.getView().byId("idnrgQPPayBt-close");b.removeStyleClass("nrgQPPay-PopupPayment"),b.removeStyleClass("nrgQPPay-PopupWhite"),b.addStyleClass("nrgQPPay-Popup"),c.addStyleClass("nrgQPPayBt-closeBG"),a.setSelected(!0)},g.prototype.onContactLog=function(){var a=this.getView().byId("idnrgQPPay-TBICL"),b=this.getView().byId("idnrgQPPay-Popup");a.setSelected(!0),b.removeStyleClass("nrgQPPay-Popup"),b.addStyleClass("nrgQPPay-PopupPayment")},g.prototype.onAcceptContactLog=function(){var a=this.getView().getModel("quickpay-cl"),b=this.getView().getModel("comp-quickpay"),c="/ContactLogSet",d=this;this._OwnerComponent.getCcuxApp().setOccupied(!0),b.create(c,{ContractID:"",BP:a.getProperty("/BP"),CA:a.getProperty("/CA"),Class:a.getProperty("/Class"),Activit:a.getProperty("/Activit"),PopMessage:a.getProperty("/PopMessage")},{success:function(a){""!==a.ContactLogID&&d.onPopupClose(),d._OwnerComponent.getCcuxApp().setOccupied(!1)},error:function(){d._OwnerComponent.getCcuxApp().setOccupied(!1)}})},g.prototype.setPosition=function(a){0===a?this.getView().getParent().setPosition("left bottom","left bottom"):this.getView().getParent().setPosition("left bottom","left bottom")},g.prototype._createSearchFilterObject=function(a,d){var e,f=[];for(e=0;e<a.length;e+=1)f.push(new b(a[e],c.EQ,d[e],""));return f},g});