sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/util/MockServer","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(a,b,c,d,e){"use strict";var f=b.extend("nrg.base.component.MockDataManager",{constructor:function(a){b.apply(this),this._oComponent=a},metadata:{publicMethods:["startMockServers","stopMockServers","addMockODataModels"]}});return f.prototype.startMockServers=function(){var b,c,d,e,f,g;if(this._aMockServers=[],"true"===a.sap.getUriParameters().get("nrg-mock")){b=this._getModuleMetadata();for(c in b)if(b.hasOwnProperty(c))for(d in b[c].odata.mock)b[c].odata.mock.hasOwnProperty(d)&&(e=b[c].odata.mock,f=this._getModuleMockDataPath(c,e[d].mockDataBaseUrl),g=this._startModuleMockServer(d,e,f),this._aMockServers.push({sMock:d,oMockServer:g}))}},f.prototype.stopMockServers=function(){this._aMockServers.forEach(function(a){a.stop()})},f.prototype.addMockODataModels=function(){this._aMockServers.forEach(function(a){var b;b=new d(a.oMockServer.getRootUri(),{defaultCountMode:e.None,useBatch:!1}),this._oComponent.setModel(b,a.sMock)}.bind(this))},f.prototype._getModuleMetadata=function(){var a,b,c;a=this._oComponent.getMetadata().getConfig()||{},b=a.module||{};for(c in b)b.hasOwnProperty(c)&&(b[c].odata=b[c].odata||{},b[c].odata.mock=b[c].odata.mock||{});return b},f.prototype._getModuleMockDataPath=function(b,c){var d;return d=a.sap.getModulePath(b),[d,c].join("/")},f.prototype._startModuleMockServer=function(a,b,d){var e;return e=new c({rootUri:d}),e.simulate(d+"metadata.xml",{sMockdataBaseUrl:d,bGenerateMissingMockData:b[a].generateMissingMockData}),e.start(),e},f.prototype.destroy=function(){this.stopMockServers(),b.prototype.destroy.apply(this,arguments)},f});