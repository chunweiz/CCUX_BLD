sap.ui.define(["jquery.sap.global","sap/ui/base/Object","nrg/base/component/WebUiManager"],function(a,b){"use strict";var c=b.extend("nrg.base.component.RouteManager",{constructor:function(a){b.apply(this),this._oComponent=a,this._aRouteHistory=[]},metadata:{publicMethods:["init","getCurrentRouteInfo"]}});return c._MAX_ROUTE_HISTORY_SIZE="50",c.prototype.init=function(){this._registerRouteCallback(),this._oComponent.getRouter().initialize(),this._subscribeWebUi()},c.prototype._subscribeWebUi=function(){var a=this._oComponent.getCcuxWebUiManager();a.attachEvent("navigate",this._onWebUiNavigate,this)},c.prototype._unsubscribeWebUi=function(){var a=this._oComponent.getCcuxWebUiManager();a.detachEvent("navigate",this._onWebUiNavigate,this)},c.prototype._onWebUiNavigate=function(b){var c,d,e,f;c=b.getParameters(),c&&c.route&&(e=c.route,f=c.params||null,d=this._oComponent.getRouter(),a.sap.log.info("[RouteManager._onWebUiNavigate()]","Navigating to "+e),d.navTo(e,f,!1))},c.prototype._registerRouteCallback=function(){var a=this._oComponent.getRouter();a.attachRouteMatched(this._onRouteMatched,this)},c.prototype._onRouteMatched=function(a){var b,c,d=!1;this._updateContext(a.getParameters()),this._updateRouteHistory(a.getParameters()),d=this._checkLayout(a.getParameters()),b=this._oComponent.getCcuxApp(),b&&b.reset(d),c=this._oComponent.getCcuxWebUiManager(),c.isAvailable()&&c.notifyWebUi("resetTimeOut")},c.prototype._checkLayout=function(a){var b=a.name,c=!1;switch(b){case"dashboard.Verification":c=!0;break;case"dashboard.VerificationWithCa":c=!0;break;case"dashboard.VerificationWithCaCo":c=!0;break;case"billing.BillingInfo":c=!0;break;case"billing.BillingInfoNoCo":c=!0;break;case"billing.BillingPrePaid":c=!0;break;case"billing.BillingPrePaidNoCo":c=!0}return c},c.prototype._updateContext=function(a){var b;b={bpNum:a.arguments.bpNum||null,caNum:a.arguments.caNum||null,coNum:a.arguments.coNum||null},this._oComponent.getCcuxContextManager().getContext().setData(b,!0)},c.prototype._updateRouteHistory=function(a){var b;return 0!==this._aRouteHistory.length&&(b=this._aRouteHistory[this._aRouteHistory.length-1]),"app.refresh"===a.name?this:b&&this._isIdenticalRouteInfo(a,b)?this:(this._aRouteHistory.length===c._MAX_ROUTE_HISTORY_SIZE&&this._aRouteHistory.shift(),this._aRouteHistory.push(a),this)},c.prototype._isIdenticalRouteInfo=function(a,b){var c;if(!a||!b)return!1;if(a.name!==b.name)return!1;for(c in a.arguments)if(a.arguments.hasOwnProperty(c)){if(!b.arguments[c])return!1;if(a.arguments[c]!==b.arguments[c])return!1}return!0},c.prototype.getCurrentRouteInfo=function(){var a;return 0===this._aRouteHistory.length?null:(a=this._aRouteHistory[this._aRouteHistory.length-1],{name:a.name,parameters:a.arguments})},c.prototype.destroy=function(){this._unsubscribeWebUi(),b.prototype.destroy.apply(this,arguments)},c});