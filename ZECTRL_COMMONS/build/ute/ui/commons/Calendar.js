sap.ui.define(["jquery.sap.global","sap/ui/core/Control","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/core/format/DateFormat","sap/ui/core/date/UniversalDate"],function(a,b,c,d,e,f){"use strict";var g=b.extend("ute.ui.commons.Calendar",{metadata:{library:"ute.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"340px"},height:{type:"sap.ui.core.CSSSize",defaultValue:"250px"},selectedDate:{type:"string",defaultValue:""}}}});return g.prototype.init=function(){this._oFormatYyyymmdd=e.getInstance({pattern:"MM/dd/yyyy"})},g.prototype._getLocaleData=function(){var a,b;return this._oLocaleData||(a=this._getLocale(),b=new c(a),this._oLocaleData=d.getInstance(b)),this._oLocaleData},g.prototype._createLocalDate=function(a,b){var c,d;return a&&(d=a instanceof f?new Date(a.getTime()):a,c=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),d.getFullYear()<1e3&&c.setFullYear(d.getFullYear()),b&&(c.setHours(d.getUTCHours()),c.setMinutes(d.getUTCMinutes()),c.setSeconds(d.getUTCSeconds()),c.setMilliseconds(d.getUTCMilliseconds()))),c},g.prototype._createUTCDate=function(a,b){var c,d;return a&&(d=a instanceof f?new Date(a.getTime()):a,c=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())),d.getFullYear()<1e3&&c.setUTCFullYear(d.getFullYear()),b&&(c.setUTCHours(d.getHours()),c.setUTCMinutes(d.getMinutes()),c.setUTCSeconds(d.getSeconds()),c.setUTCMilliseconds(d.getMilliseconds()))),c},g.prototype._getCurrentDate=function(){return this._oFocusedDate=this._createLocalDate(new Date),this._oFocusedDate},g.prototype._getFocusedDate=function(){var a=this.getSelectedDate();return this._oFocusedDate||(a?this._oFocusedDate=this._oFormatYyyymmdd.parse(a):this._getCurrentDate()),this._oFocusedDate},g.prototype._setFocusedDate=function(a){this._oFocusedDate=a},g.prototype._renderMonth=function(){var a,b=this._getFocusedDate(),c=this.$("dayPic"),d=[];this._sRenderMonth=void 0,c.length>0&&(a=sap.ui.getCore().createRenderManager(),this.getRenderer().renderDays(a,this,b),a.flush(c[0]),a.destroy()),d=this._getLocaleData().getMonthsStandAlone(this._bLongMonth||!this._bNamesLengthChecked?"wide":"abbreviated"),this.$("month").text(d[b.getUTCMonth()]),this.$("year").text(b.getUTCFullYear())},g.prototype._selectDay=function(b){var c,d,e,f=(this.getSelectedDate(),this.$("dayPic").children(".uteCal-dayPic-day")),g=0;for(d=this._oFormatYyyymmdd.format(b,!0),g=0;g<f.length;g+=1)c=a(f[g]),e=c.attr("data-nrg-day"),c.hasClass("uteCal-dayPic-dayOtherMonth")||c.attr("data-nrg-day")!==d?c.hasClass("uteCal-dayPic-daySelected")&&c.removeClass("uteCal-dayPic-daySelected"):c.addClass("uteCal-dayPic-daySelected");this.setProperty("selectedDate",d,!0)},g.prototype.onclick=function(b){var c,d,e=this._getFocusedDate();if(a.sap.containsOrEquals(this.getDomRef("next"),b.target)&&!this.$("next").attr("disabled"))e.setUTCMonth(e.getUTCMonth()+1,1),this._renderMonth();else if(a.sap.containsOrEquals(this.getDomRef("prev"),b.target)&&!this.$("prev").attr("disabled"))e.setUTCDate(1),e.setUTCDate(e.getUTCDate()-1),this._renderMonth();else{if(c=a(b.target),c.hasClass("uteCal-dayPic-dayNoRange"))return b.stopPropagation(),b.preventDefault(),!1;if(c.hasClass("uteCal-dayPic-day"))if(e=this._getFocusedDate(),d=e,e=this._oFormatYyyymmdd.parse(c.attr("data-nrg-day"),!1),e.getTime()!==d.getTime())if(c.hasClass("uteCal-dayPic-dayOtherMonth"))this._setFocusedDate(e),this._renderMonth(),b.stopPropagation(),b.preventDefault();else{if(c.hasClass("uteCal-dayPic-dayNoRange"))return b.stopPropagation(),b.preventDefault(),!1;this._setFocusedDate(e),this._selectDay(this._getFocusedDate()),this.fireEvent("select"),b.stopPropagation(),b.preventDefault()}else this.fireEvent("select")}},g.prototype._getLocale=function(){return this._sLocale||(this._sLocale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().toString()),this._sLocale},g.prototype._checkDateSelected=function(a){var b,c=0,d=this.getSelectedDate(),e=a.getTime();if(!(a instanceof Date))throw new Error("Date must be a JavaScript date object; "+this);return d=this._oFormatYyyymmdd.parse(d,!1),d&&(b=d.getTime()),b===e&&(c=1),c},g.prototype._checkDateRange=function(a){var b=!0,c=this.getMinDate().getTime(),d=a.getTime(),e=this.getMaxDate().getTime();if(!(a instanceof Date))throw new Error("Date must be a JavaScript date object; "+this);return b=d>=c&&e>=d?!0:!1},g.prototype.focusDate=function(a){this._setFocusedDate(a),this.setProperty("selectedDate",this._oFormatYyyymmdd.format(a),!0),this._renderMonth()},g.prototype.addSelectedDate=function(a){this.setProperty("selectedDate",a,!0),this._oFocusedDate=this._oFormatYyyymmdd.parse(a),this._renderMonth()},g.prototype.setMinDate=function(a){if(!(a instanceof Date))throw new Error("Date must be a JavaScript date object; "+this);this._oMinDate=a},g.prototype.setMaxDate=function(a){if(!(a instanceof Date))throw new Error("Date must be a JavaScript date object; "+this);this._oMaxDate=a},g.prototype.getMinDate=function(){return this._oMinDate},g.prototype.getMaxDate=function(){return this._oMaxDate},g},!0);